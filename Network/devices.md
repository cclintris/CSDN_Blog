@[TOC](搞清楚網絡中的設備)

# 以太網
先從傳統的以太網技術來了解衝突域和廣播域的概念。傳統的以太網是總線型拓樸的，如下圖所示:
![](https://wtfhhh.oss-cn-beijing.aliyuncs.com/dev-1.jpg)

也就是說，假設今天主機 A 要發一個數據報出去，且主機 B 也要發一個報文出去，那麼總線是不允許的。這就表示，所有總線上的設備構成一個衝突域。

那如果今天主機 A 成功發了一個廣播型數據報出去，那因為以太網是總線拓樸，所以所有主機 (B,C,D,E) 都可以聽到這個報文。這就表示，所有總線上的設備構成一個廣播域。

# 中繼器 (Repeater)
中繼器的出現主要是為了兩個功能:
1. 擴展網絡的距離
2. 實現兩個 (或以上) 以太局域網的互聯

![](https://wtfhhh.oss-cn-beijing.aliyuncs.com/dev-2.jpg)

圖中，本來網段 1 和網段 2 各自構成獨立的局域網，擁有各自的衝突域和廣播域。但是通過中繼器的互聯之後，網段 1 和網段 2 共同組成了一個衝突域和一個廣播域。

# 集線器 (Hub)
集線器其實可以想成是多端口的中繼器。中繼器只有 2 個端口，只能互聯兩個網段，而集線器通常有 8,16,24 個端口。

![](https://wtfhhh.oss-cn-beijing.aliyuncs.com/dev-3.jpg)

如圖，通過集線器，主機 A,B,C 構成了一個星型拓樸。但是這邊要記住，通過集線器的互聯的所有設備，實際上還是都屬於同一個衝突域和廣播域。為甚麼呢?這是因為其實集線器雖然有很多個端口可以互連道不同的網段，但是本質上這些端口仍然是通過一條背板總線互連的。因此，以上圖為例，A 發的廣播型數據報同樣 B,C 都還是收的到，而集線器同樣不允許 A,B,C 同時發數據報。

# 網橋 (Bridge)
網橋其實也跟中繼器很像，同樣都可以連接兩個網段。但是網橋還具備了一定的「學習能力」。就是說網橋可以學習到網絡中設備的地址，而且還可以過濾判別是否要轉發數據報。

![](https://wtfhhh.oss-cn-beijing.aliyuncs.com/dev-4.jpg)

圖中網橋連接了網段 1 和網段 2。但是當主機 A 發一個數據報時，網橋會智能的判別，這是一個網段 1 的數據報，他應該不會想要讓網段 2 的主機也收到吧。所以當 A 發一個數據報時，只有 B,C 收的到。這隱含的意思就是，網橋可以把互連的不同網段劃分衝突域，因為既然 A 發的不會傳到網段 2，那網段 2 的設備當然就能同時發數據報給網段 2 自己的其他設備了。

但是，如果今天主機 X 發了一個廣播數據報到總線上，那麼還是同樣會發給所有在總線上的設備，網橋是會轉發該類數據報的。所以，網段 1 跟網段 2 還是屬於同一個廣播域。

# 交換機 (Switch)
前面提到，集線器雖然有多個端口，但是其實這些端口還是通過一條背板總線互連，也就是說，各個端口是共享同一條總線的帶寬等等的。

交換機的做法，就是直接為需要通信的設備之間，直接增加專屬的通信信道。

![](https://wtfhhh.oss-cn-beijing.aliyuncs.com/dev-5.jpg)

如圖，交換機直接為 A,B 建立專屬通道，為 C,D 建立專屬通道。所以，A,B 和 C,D 屬於兩個不同的衝突域衝突域。也就是說，我們可以把交換機想像成一個多端口的網橋，每個端口都構成一個自己的衝突域，交換機也不會轉發各端口所屬網段間的數據報。

但是，交換機同樣還是不能劃分廣播域。如果今天主機 A 發了一個廣播數據報，那麼其他主機，包括主機 B,C,D,X,Y,Z 同樣都還是會收到這個數據報。當一個交換機收到廣播數據報，他還是會向所有端口發送該數據報。

#　路由器 (Router)
路由器則可以劃分不同的廣播域，做到了上述設備都做不到的功能。

![](https://wtfhhh.oss-cn-beijing.aliyuncs.com/dev-6.jpg)

如圖，連接網段 1 和網段 2的是路由器。所以網段1 和網段 2就各自都構成了獨立的衝突域和廣播域。即使主機 A 發送一個廣播數據報道總線上，該數據報依然只會讓同個網段的主機都收的到，也就是主機 B,C。

